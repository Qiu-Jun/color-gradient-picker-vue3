!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)["color-gradient-picker-vue3"]=t(e.Vue)}(this,(function(e){"use strict";var t=Object.defineProperty,n=Object.defineProperties,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,u=(e,t)=>{for(var n in t||(t={}))a.call(t,n)&&i(e,n,t[n]);if(r)for(var n of r(t))l.call(t,n)&&i(e,n,t[n]);return e},d=(e,t)=>n(e,o(t));function c({red:e,green:t,blue:n,alpha:o}){let r,a,l,i,u=0;const d=e/255,c=t/255,s=n/255,p=Math.max(d,c,s),g=p-Math.min(d,c,s),h=e=>(p-e)/6/g+.5;return 0===g?(u=0,i=0):(i=g/p,r=h(d),a=h(c),l=h(s),d===p?u=l-a:c===p?u=1/3+r-l:s===p&&(u=2/3+a-r),u<0?u+=1:u>1&&(u-=1)),{hue:Math.round(360*u),saturation:Math.round(100*i),value:Math.round(100*p)}}function s(e){return"number"==typeof e&&!1===Number.isNaN(e)&&e>=0&&e<=255}function p(e,t,n,o){if(s(e)&&s(t)&&s(n)){const r={red:0|e,green:0|t,blue:0|n,alpha:0|o};return!0===s(o)&&(r.alpha=0|o),r}}function g(e,t,n){let o=t/100*(n/=100);const r=e/60;let a=o*(1-Math.abs(r%2-1)),l=n-o;return o=255*(o+l)|0,a=255*(a+l)|0,l=255*l|0,r>=1&&r<2?p(a,o,l,1):r>=2&&r<3?p(l,o,a,1):r>=3&&r<4?p(l,a,o,1):r>=4&&r<5?p(a,l,o,1):r>=5&&r<=6?p(o,l,a,1):p(o,a,l,1)}function h(e,t,n,o,r){e>o&&(e=o),t>n&&(t=n),e<0&&(e=0),t<0&&(t=0);const a=100-100*t/n|0,l=100*e/o|0;return d(u({},g(r,l,a)),{saturation:l,value:a})}function v(e,t,n,o){let r=360*e/t|0;return r=r<0?0:r>360?360:r,d(u({},g(r,n,o)),{hue:r})}function m(e,t){return(e=Number((e/t).toFixed(2)))>1?1:e<0?0:e}function f(e,t,n){let o=e.toString(16),r=t.toString(16),a=n.toString(16);return e<16&&(o=`0${o}`),t<16&&(r=`0${r}`),n<16&&(a=`0${a}`),o+r+a}const b=/(^#{0,1}[0-9A-F]{6}$)|(^#{0,1}[0-9A-F]{3}$)|(^#{0,1}[0-9A-F]{8}$)/i;function C(e,t){const n=100*e/t;return n<0?0:n>100?100:n}function y(e,t){return e||0===e?e:t}function k(e,t,n,o){return`rgba(${e}, ${t}, ${n}, ${o})`}function E(e,t,n){let o="";const r=e.slice();return r.sort(((e,t)=>e.left-t.left)),o="linear"===t?`linear-gradient(${n}deg,`:"radial-gradient(",r.forEach(((e,t)=>{o+=`rgba(${e.red}, ${e.green}, ${e.blue}, ${e.alpha}) ${e.left}%`,t!==r.length-1&&(o+=",")})),o+=")",o}function N(e,t,n){return function(o){let r=e(o);function a(e){r=t(e,r)||r}window.addEventListener("mousemove",a),window.addEventListener("mouseup",(e=>{window.removeEventListener("mousemove",a),n&&n(e,r)}),{once:!0})}}const B={class:"picking-area-overlay1"},V={class:"picking-area-overlay2"},x=e.defineComponent({name:"Picker"}),P=e.defineComponent(d(u({},x),{props:{red:Number,green:Number,blue:Number,alpha:Number,hue:Number,saturation:Number,value:Number,updateColor:Function},setup(t){const n=t,o=e.ref(null),r=e.reactive({width:0,height:0,mouseEvents:()=>!1}),a=e.computed((()=>(n.saturation*r.width/100|0)-6)),l=e.computed((()=>(r.height-n.value*r.height/100|0)-6)),i=e.computed((()=>({backgroundColor:`rgb(${n.red}, ${n.green}, ${n.blue})`,left:`${a.value}px`,top:`${l.value}px`}))),u=e.computed((()=>{const{red:e,green:t,blue:o}=function(e){let t=1;const n=e/60;let o=t*(1-Math.abs(n%2-1)),r=0,a=0,l=0;return t=255*(t+0)|0,o=255*(o+0)|0,n>=0&&n<1&&(r=0|t,a=0|o,l=0),n>=1&&n<2&&(r=0|o,a=0|t,l=0),n>=2&&n<3&&(r=0,a=0|t,l=0|o),n>=3&&n<4&&(r=0,a=0|o,l=0|t),n>=4&&n<5&&(r=0|o,a=0,l=0|t),n>=5&&n<=6&&(r=0|t,a=0,l=0|o),{red:r,green:a,blue:l}}(n.hue);return{backgroundColor:`rgb(${e}, ${t}, ${o})`}})),d=e=>{const t=null==o?void 0:o.value;if(!t)return;const{x:a,y:l}=t.getBoundingClientRect(),i=e.pageX,u=e.pageY,d=i-a,c=u-l,s=h(d,c,r.height,r.width,n.hue);return n.updateColor(s,"onStartChange"),{startX:i,startY:u,positionX:d,positionY:c}},c=(e,{startX:t,startY:o,positionX:a,positionY:l})=>{const i=h(a+=e.pageX-t,l+=e.pageY-o,r.height,r.width,n.hue);return{positions:{positionX:a,positionY:l,startX:e.pageX,startY:e.pageY},color:i}},s=(e,{startX:t,startY:o,positionX:r,positionY:a})=>{const{positions:l,color:i}=c(e,{startX:t,startY:o,positionX:r,positionY:a});return n.updateColor(i,"onChange"),l},p=(e,{startX:t,startY:o,positionX:r,positionY:a})=>{const{positions:l,color:i}=c(e,{startX:t,startY:o,positionX:r,positionY:a});return n.updateColor(i,"onEndChange"),l};return e.onMounted((()=>{const e=null==o?void 0:o.value;e&&(r.width=e.clientWidth,r.height=e.clientHeight),r.mouseEvents=N(d,s,p)})),(t,n)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"pickerAreaRef",ref:o,class:"picking-area",style:e.normalizeStyle(e.unref(u)),onMousedown:n[0]||(n[0]=(...e)=>r.mouseEvents&&r.mouseEvents(...e))},[e.createElementVNode("div",B,[e.createElementVNode("div",V,[e.createElementVNode("div",{class:"picker-pointer",style:e.normalizeStyle(e.unref(i))},null,4)])])],36))}})),X={class:"preview-area"},w=e.defineComponent({name:"PickerPreView"}),S=e.defineComponent(d(u({},w),{props:{isGradient:{type:Boolean,default:!1},red:{default:255},green:{default:0},blue:{default:0},alpha:{default:1},points:{default:()=>[{left:0,red:0,green:0,blue:0,alpha:1},{left:100,red:255,green:0,blue:0,alpha:1}]},gradientDegree:{default:0},gradientType:{default:""}},setup(t){const n=t,o=e.computed((()=>{let e="";return n.isGradient?(e=E(n.points,n.gradientType,n.gradientDegree),{background:e}):(e=k(n.red,n.green,n.blue,n.alpha),{backgroundColor:e})}));return(t,n)=>(e.openBlock(),e.createElementBlock("div",X,[e.createElementVNode("div",{class:"preview-box",style:e.normalizeStyle(e.unref(o))},null,4)]))}})),G=e.defineComponent({name:"Hue"}),F=e.defineComponent(d(u({},G),{props:{hue:Number,saturation:Number,value:Number,updateColor:Function},setup(t){const n=t,o=e.ref(null),r=e.reactive({width:0,mouseEvents:()=>!1}),a=e.computed((()=>(n.hue*r.width/360|0)-6)),l=e.computed((()=>({left:`${a.value}px`}))),i=e=>{const t=e.currentTarget.getBoundingClientRect().x,o=e.pageX,a=o-t,l=v(a,r.width,n.saturation,n.value);return n.updateColor(l,"onStartChange"),{startX:o,positionX:a}},u=(e,{startX:t,positionX:o})=>{const a=v((o+=e.pageX-t)>r.width?r.width:o<=0?0:o,r.width,n.saturation,n.value);return{positions:{positionX:o,startX:e.pageX},color:a}},d=(e,{startX:t,positionX:o})=>{const{positions:r,color:a}=u(e,{startX:t,positionX:o});return n.updateColor(a,"onChange"),r},c=(e,{startX:t,positionX:o})=>{const{positions:r,color:a}=u(e,{startX:t,positionX:o});return n.updateColor(a,"onEndChange"),r};return e.onMounted((()=>{o.value&&(r.width=o.value.clientWidth),r.mouseEvents=N(i,d,c)})),(t,n)=>(e.openBlock(),e.createElementBlock("div",{class:"hue",onMousedown:n[0]||(n[0]=(...e)=>r.mouseEvents&&r.mouseEvents(...e))},[e.createElementVNode("div",{ref_key:"hueRef",ref:o,class:"hue-area"},[e.createElementVNode("div",{class:"picker-pointer",style:e.normalizeStyle(e.unref(l))},null,4)],512)],32))}})),I={class:"alpha-area"},$=e.defineComponent({name:"alpha"}),D=e.defineComponent(d(u({},$),{props:{red:Number,green:Number,blue:Number,alpha:Number,updateColor:Function},setup(t){const n=t,o=e.ref(null),r=e.reactive({width:0,mouseEvents:()=>!1}),a=e.computed((()=>(n.alpha*r.width|0)-6)),l=e.computed((()=>({left:`${a.value}px`}))),i=e.computed((()=>({background:`linear-gradient(to right, rgba(0, 0, 0, 0), rgb(${n.red}, ${n.green}, ${n.blue}))`}))),u=e=>{const t=e.currentTarget.getBoundingClientRect().x,o=e.pageX,a=o-t;return n.updateColor({alpha:m(a,r.width)},"onStartChange"),{startX:o,positionX:a}},d=(e,{startX:t,positionX:n})=>{const o=m(n+=e.pageX-t,r.width);return{positions:{positionX:n,startX:e.pageX},alpha:o}},c=(e,{startX:t,positionX:o})=>{const{positions:r,alpha:a}=d(e,{startX:t,positionX:o});return n.updateColor({alpha:a},"onChange"),r},s=(e,{startX:t,positionX:o})=>{const{positions:r,alpha:a}=d(e,{startX:t,positionX:o});return n.updateColor({alpha:a},"onEndChange"),r};return e.onMounted((()=>{const e=o.value;e&&(r.width=e.clientWidth),r.mouseEvents=N(u,c,s)})),(t,n)=>(e.openBlock(),e.createElementBlock("div",{class:"alpha",onMousedown:n[0]||(n[0]=(...e)=>r.mouseEvents&&r.mouseEvents(...e))},[e.createElementVNode("div",{class:"gradient",style:e.normalizeStyle(e.unref(i))},null,4),e.createElementVNode("div",I,[e.createElementVNode("div",{ref_key:"alphaMaskRef",ref:o,class:"alpha-mask"},[e.createElementVNode("div",{class:"picker-pointer",style:e.normalizeStyle(e.unref(l))},null,4)],512)])],32))}})),R=e.defineComponent({name:"GradientPoint"}),T=e.defineComponent(d(u({},R),{props:{point:Object,activePointIndex:Number,index:Number,width:Number,positions:Object,changeActivePointIndex:Function,updateGradientLeft:Function,removePoint:Function},setup(t){const n=t,o=e.reactive({mouseEvents:()=>!1}),r=e.computed((()=>n.activePointIndex===n.index?" active":"")),a=e.computed((()=>({left:n.point.left*(n.width/100)-6+"px"}))),l=e=>{n.changeActivePointIndex(n.index);const t=e.pageX,o=e.pageY,r=t-n.positions.x;return n.updateGradientLeft(n.point.left,n.index,"onStartChange"),{startX:t,startY:o,offsetX:r}},i=(e,{startX:t,offsetX:o})=>{const r=C(o+=e.pageX-t,n.width);return{positions:{offsetX:o,startX:e.pageX},left:r}},u=(e,{startX:t,offsetX:o})=>{const{positions:r,left:a}=i(e,{startX:t,offsetX:o});return n.updateGradientLeft(a,n.index,"onChange"),r},d=(e,{startX:t,offsetX:o})=>{const{positions:r,left:a}=i(e,{startX:t,offsetX:o});return n.updateGradientLeft(a,n.index,"onEndChange"),r};return e.onMounted((()=>{o.mouseEvents=N(l,u,d)})),(l,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(`picker-pointer${e.unref(r)}`),style:e.normalizeStyle(e.unref(a)),onMousedown:i[0]||(i[0]=(...e)=>o.mouseEvents&&o.mouseEvents(...e)),onDblclick:i[1]||(i[1]=()=>n.removePoint(t.index)),onClick:i[2]||(i[2]=e.withModifiers((()=>{}),["stop"]))},[e.createElementVNode("span",{class:e.normalizeClass(`child-point${e.unref(r)}`)},null,2)],38))}})),A=e.defineComponent({name:"GradientPoints"}),M=e.defineComponent(d(u({},A),{props:{points:Array,activePointIndex:Number,changeActivePointIndex:Function,updateGradientLeft:Function,addPoint:Function,removePoint:Function},setup(t){const n=t,o=e.ref(null),r=e.reactive({width:0,positions:{x:0,y:0}}),a=e.computed((()=>({background:E(n.points,"linear",90)}))),l=e=>{const t=C(e.pageX-r.positions.x,r.width);n.addPoint(t)};return e.onMounted((()=>{const e=o.value;if(e){r.width=e.clientWidth;const t=e.getBoundingClientRect();r.positions={x:t.x,y:t.y}}})),(i,u)=>(e.openBlock(),e.createElementBlock("div",{class:"gradient",style:e.normalizeStyle(e.unref(a)),onClick:l},[e.createElementVNode("div",{ref_key:"pointsContainerRef",ref:o,class:"gradient-slider-container"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.points,((o,a)=>(e.openBlock(),e.createBlock(T,{key:a,"active-point-index":n.activePointIndex,index:a,point:o,width:r.width,positions:r.positions,"change-active-point-index":n.changeActivePointIndex,"update-gradient-left":t.updateGradientLeft,"remove-point":n.removePoint},null,8,["active-point-index","index","point","width","positions","change-active-point-index","update-gradient-left","remove-point"])))),128))],512)],4))}})),Y={class:"picker-area"},z={class:"preview"},L={class:"color-hue-alpha"},H=e.defineComponent({name:"ColorPicker"}),O=e.defineComponent(d(u({},H),{props:{isGradient:Boolean,red:Number,green:Number,blue:Number,alpha:Number,hue:Number,saturation:Number,value:Number,updateColor:Function,points:Array,degree:Number,type:String,activePointIndex:Number,changeGradientControl:Function,changeActivePointIndex:Function,updateGradientLeft:Function,addPoint:Function,removePoint:Function},setup:t=>(n,o)=>(e.openBlock(),e.createElementBlock("div",Y,[e.createVNode(P,{red:t.red,green:t.green,blue:t.blue,hue:t.hue,saturation:t.saturation,value:t.value,"update-color":t.updateColor},null,8,["red","green","blue","hue","saturation","value","update-color"]),t.isGradient?(e.openBlock(),e.createBlock(M,{key:0,type:t.type,degree:t.degree,points:t.points,"active-point-index":t.activePointIndex,"change-active-point-index":t.changeActivePointIndex,"update-gradient-left":t.updateGradientLeft,"add-point":t.addPoint,"remove-point":t.removePoint},null,8,["type","degree","points","active-point-index","change-active-point-index","update-gradient-left","add-point","remove-point"])):e.createCommentVNode("",!0),e.createElementVNode("div",z,[e.createVNode(S,{red:t.red,green:t.green,blue:t.blue,alpha:t.alpha,"is-gradient":t.isGradient,points:t.points,"gradient-degree":t.degree,"gradient-type":t.type},null,8,["red","green","blue","alpha","is-gradient","points","gradient-degree","gradient-type"]),e.createElementVNode("div",L,[e.createVNode(F,{hue:t.hue,saturation:t.saturation,value:t.value,"update-color":t.updateColor},null,8,["hue","saturation","value","update-color"]),e.createVNode(D,{alpha:t.alpha,red:t.red,green:t.green,blue:t.blue,"update-color":t.updateColor},null,8,["alpha","red","green","blue","update-color"])])])]))})),j={class:"input-container"},_={class:"label"},W=e.defineComponent({name:"Input"}),U=((e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n})(e.defineComponent(d(u({},W),{props:{value:{default:""},label:{default:""},type:{default:"text"},classes:{default:""},onFocus:{type:Function,default:()=>{}},onBlur:{type:Function,default:()=>{}}},emits:["input","update:value"],setup(t,{emit:n}){const o=t,r=e.computed({get:()=>o.value,set:e=>n("update:value",e)}),a=e=>{n("input",e)};return(n,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(`input-field ${o.classes}`)},[e.createElementVNode("div",j,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":l[0]||(l[0]=t=>e.isRef(r)?r.value=t:null),class:e.normalizeClass(`${o.type}-input input`),onFocus:l[1]||(l[1]=(...e)=>o.onFocus&&o.onFocus(...e)),onBlur:l[2]||(l[2]=(...e)=>o.onBlur&&o.onBlur(...e)),onInput:a},null,34),[[e.vModelText,e.unref(r)]])]),e.createElementVNode("div",_,e.toDisplayString(t.label),1)],2))}})),[["__scopeId","data-v-986fef99"]]),q=e.defineComponent({name:"Preview"}),J=e.defineComponent(d(u({},q),{props:{red:{default:0},green:{default:0},blue:{default:0},alpha:null,updateColor:{type:Function,default:e=>!1}},setup(t){const n=t,o=e.reactive({hexValue:f(n.red,n.green,n.blue)}),r=e.computed((()=>f(n.red,n.green,n.blue))),a=e=>{const t=function(e){if(b.test(e)){if("#"===e[0]&&(e=e.slice(1,e.length)),e.length<6)return;const t=p(parseInt(e.substring(0,2),16)||0,parseInt(e.substring(2,4),16)||0,parseInt(e.substring(4,6),16)||0,parseInt(e.substring(6,10),16)/255||0),n=t&&c(u({},t));return u(u({},t),n)}return!1}(e.target.value);t&&n.updateColor(t)};return e.watch((()=>[n.red,n.green,n.blue]),(()=>{6===r.value.length&&(o.hexValue=r.value)})),(t,n)=>(e.openBlock(),e.createBlock(U,{value:o.hexValue,label:"hex",classes:"hex",onInput:a},null,8,["value"]))}})),K=e.defineComponent({name:"RGBItem"}),Q=e.defineComponent(d(u({},K),{props:{value:null,type:{default:"text"},label:{default:""},onChange:{type:Function,default:e=>!1}},setup(t){const n=t,o=e.getCurrentInstance(),r=e.reactive({inputValue:n.value||0,inProgress:!1}),a=e=>{var t;const a=+e.target.value;if(Number.isNaN(a)||a<0||a>255)return r.inputValue=n.value,void(null==(t=null==o?void 0:o.proxy)||t.$forceUpdate());r.inputValue=e.target.value,n.onChange(a)},l=()=>{r.inputValue||(r.inputValue=n.value),r.inProgress=!1};return e.watch((()=>n.value),(()=>{n.value!==+r.inputValue&&""!==r.inputValue&&(r.inputValue=n.value)})),(t,o)=>(e.openBlock(),e.createElementBlock("div",null,[e.createVNode(U,{value:r.inputValue,type:n.type,label:n.label,"on-focus":()=>r.inProgress=!0,"on-blur":l,"in-progress":r.inProgress,classes:"rgb",onInput:a},null,8,["value","type","label","on-focus","in-progress"])]))}})),Z=e.defineComponent({name:"RGB"}),ee=e.defineComponent(d(u({},Z),{props:{red:{default:0},green:{default:0},blue:{default:0},alpha:{default:0},updateColor:{type:Function,default:()=>!1}},setup(t){const n=t,o=(e,t)=>{if("alpha"===e)return void n.updateColor({alpha:t/100});const o=c({red:n.red,green:n.green,blue:n.blue,[e]:t});n.updateColor(d(u({},o),{[e]:t}))};return(t,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(Q,{value:n.red,type:"number",label:"R","on-change":e=>o("red",e)},null,8,["value","on-change"]),e.createVNode(Q,{value:n.green,type:"number",label:"G","on-change":e=>o("green",e)},null,8,["value","on-change"]),e.createVNode(Q,{value:n.blue,type:"number",label:"B","on-change":e=>o("blue",e)},null,8,["value","on-change"]),e.createVNode(Q,{value:100*n.alpha,type:"number",label:"Alpha","on-change":e=>o("alpha",e)},null,8,["value","on-change"])],64))}})),te={class:"color-preview-area"},ne={class:"input-group"},oe=e.defineComponent({name:"Preview"}),re=e.defineComponent(d(u({},oe),{props:{red:{default:0},green:{default:0},blue:{default:0},alpha:{default:0},updateColor:{type:Function,default:e=>!1}},setup(t){const n=t;return(t,o)=>(e.openBlock(),e.createElementBlock("div",te,[e.createElementVNode("div",ne,[e.createVNode(J,{red:n.red,green:n.green,blue:n.blue,"update-color":n.updateColor},null,8,["red","green","blue","update-color"]),e.createVNode(ee,{red:n.red,green:n.green,blue:n.blue,alpha:n.alpha,"update-color":n.updateColor},null,8,["red","green","blue","alpha","update-color"])])]))}})),ae=e.defineComponent({name:"Solid"}),le=e.defineComponent(d(u({},ae),{props:{red:{default:255},green:{default:0},blue:{default:0},alpha:{default:1},hue:{default:0},saturation:{default:0},value:{default:0}},setup(t){const n=t,o=e.inject("provideData"),r=e.reactive({colorRed:n.red,colorGreen:n.green,colorBlue:n.blue,colorAlpha:n.alpha,colorHue:0,colorSaturation:100,colorValue:100}),a={onStartChange:o.onStartChange,onChange:o.onChange,onEndChange:o.onEndChange},l=e.computed((()=>void 0===n.hue||void 0===n.saturation||void 0===n.value?c({red:n.red,green:n.green,blue:n.blue}):{hue:n.hue,saturation:n.saturation,value:n.value})),i=e.computed((()=>({red:n.red,green:n.green,blue:n.blue,alpha:n.alpha})));e.watch((()=>l.value),(e=>{const{hue:t,saturation:n,value:o}=e;r.colorHue=t,r.colorSaturation=n,r.colorValue=o})),e.watch((()=>i.value),(e=>{const{red:t,green:n,blue:o,alpha:a}=e;r.colorRed=t,r.colorGreen=n,r.colorBlue=o,r.colorAlpha=a}));const u=({red:e,green:t,blue:n,alpha:o,hue:l,saturation:i,value:u},d="onChange")=>{e=y(e,r.colorRed),t=y(t,r.colorGreen),n=y(n,r.colorBlue),o=y(o,r.colorAlpha),l=y(l,r.colorHue),i=y(i,r.colorSaturation),u=y(u,r.colorValue),r.colorRed=e,r.colorGreen=t,r.colorBlue=n,r.colorAlpha=o,r.colorHue=l,r.colorSaturation=i,r.colorValue=u;const c=a[d];c&&c({red:e,green:t,blue:n,alpha:o,hue:l,saturation:i,value:u,style:k(e,t,n,o)})};return e.onMounted((()=>{const{hue:e,saturation:t,value:n}=c({red:r.colorRed,green:r.colorGreen,blue:r.colorBlue});r.colorHue=e,r.colorSaturation=t,r.colorValue=n})),(t,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(O,{red:r.colorRed,green:r.colorGreen,blue:r.colorBlue,alpha:r.colorAlpha,hue:r.colorHue,saturation:r.colorSaturation,value:r.colorValue,"update-color":u,"is-gradient":!1},null,8,["red","green","blue","alpha","hue","saturation","value"]),e.createVNode(re,{red:r.colorRed,green:r.colorGreen,blue:r.colorBlue,alpha:r.colorAlpha,"update-color":u},null,8,["red","green","blue","alpha"])],64))}})),ie={class:"gradient-controls"},ue={class:"gradient-type"},de={key:0,class:"gradient-degrees-options"},ce=[e.createElementVNode("div",{class:"gradient-degree-pointer"},null,-1)],se={class:"gradient-degree-value"},pe=e.defineComponent({name:"GradientControls"}),ge=e.defineComponent(d(u({},pe),{props:{type:String,degree:Number,changeGradientControl:{type:Function,default:()=>!1}},setup(t){const n=t,o=e.reactive({disableClick:!1,mouseEvents:()=>!1}),r=e.computed((()=>({transform:`rotate(${n.degree}deg)`}))),a=e=>{const t=e.target.getBoundingClientRect();return{centerY:~~(8-window.pageYOffset)+t.top,centerX:~~(8-window.pageXOffset)+t.left}},l=(e,{centerX:t,centerY:r})=>{o.disableClick=!0;const a=function(e,t,n,o){return Math.atan2(e-n,t-o)*(180/Math.PI)*-1+180}(e.clientX,e.clientY,t,r);n.changeGradientControl({degree:~~a})},i=e=>{const t=e.target.classList;t.contains("gradient-degrees")||t.contains("icon-rotate")||(o.disableClick=!1)},u=()=>{if(o.disableClick)return void(o.disableClick=!1);let e=(n.degree||0)+45;e>=360&&(e=0),n.changeGradientControl({degree:~~e})};return e.onMounted((()=>{o.mouseEvents=N(a,l,i)})),(t,a)=>(e.openBlock(),e.createElementBlock("div",ie,[e.createElementVNode("div",ue,[e.createElementVNode("div",{class:e.normalizeClass("gradient-type-item liner-gradient "+("linear"===n.type?"active":"")),onClick:a[0]||(a[0]=()=>n.changeGradientControl({type:"linear"}))},null,2),e.createElementVNode("div",{class:e.normalizeClass("gradient-type-item radial-gradient "+("radial"===n.type?"active":"")),onClick:a[1]||(a[1]=()=>n.changeGradientControl({type:"radial"}))},null,2)]),"linear"===n.type?(e.openBlock(),e.createElementBlock("div",de,[e.createElementVNode("div",{class:"gradient-degrees",onMousedown:a[2]||(a[2]=(...e)=>o.mouseEvents&&o.mouseEvents(...e)),onClick:u},[e.createElementVNode("div",{class:"gradient-degree-center",style:e.normalizeStyle(e.unref(r))},ce,4)],32),e.createElementVNode("div",se,[e.createElementVNode("p",null,e.toDisplayString(n.degree)+"°",1)])])):e.createCommentVNode("",!0)]))}})),he=e.defineComponent({name:"Gradient"}),ve=e.defineComponent(d(u({},he),{props:{type:{default:"linear"},degree:{default:0},points:{default:()=>[{left:0,red:0,green:0,blue:0,alpha:1},{left:100,red:255,green:0,blue:0,alpha:1}]},onStartChange:null,onChange:null,onEndChange:null},setup(t){const n=t,o=e.inject("provideData"),r=e.reactive({activePointIndex:0,gradientPoints:n.points,activePoint:n.points[0],colorRed:n.points[0].red,colorGreen:n.points[0].green,colorBlue:n.points[0].blue,colorAlpha:n.points[0].alpha,colorHue:0,colorSaturation:100,colorValue:100,gradientType:n.type,gradientDegree:n.degree}),a={onStartChange:o.onStartChange,onChange:o.onChange,onEndChange:o.onEndChange},l=(e=r.activePointIndex)=>{r.gradientPoints.length<=2||(r.gradientPoints.splice(e,1),e>0&&(r.activePointIndex=e-1),n.onChange&&n.onChange({points:r.gradientPoints,type:r.gradientType,degree:r.gradientDegree,style:E(r.gradientPoints,r.gradientType,r.gradientDegree)}))},i=e=>{46!==e.keyCode&&8!==e.keyCode||l(r.activePointIndex)},s=e=>{r.activePointIndex=e,r.activePoint=r.gradientPoints[e];const{red:t,green:n,blue:o,alpha:a}=r.activePoint;r.colorRed=t,r.colorGreen=n,r.colorBlue=o,r.colorAlpha=a;const{hue:l,saturation:i,value:u}=c({red:t,green:n,blue:o});r.colorHue=l,r.colorSaturation=i,r.colorValue=u},p=({type:e,degree:t})=>{e=y(e,r.gradientType),t=y(t,r.gradientDegree),r.gradientType=e,r.gradientDegree=t,n.onChange&&n.onChange({points:r.gradientPoints,type:r.gradientType,degree:r.gradientDegree,style:E(r.gradientPoints,r.gradientType,r.gradientDegree)})},g=({red:e,green:t,blue:n,alpha:o,hue:l,saturation:i,value:c},s="onChange")=>{e=y(e,r.colorRed),t=y(t,r.colorGreen),n=y(n,r.colorBlue),o=y(o,r.colorAlpha),l=y(l,r.colorHue),i=y(i,r.colorSaturation),c=y(c,r.colorValue);const p=r.gradientPoints.slice();p[r.activePointIndex]=d(u({},p[r.activePointIndex]),{red:e,green:t,blue:n,alpha:o}),r.colorRed=e,r.colorGreen=t,r.colorBlue=n,r.colorAlpha=o,r.colorHue=l,r.colorSaturation=i,r.colorValue=c,r.gradientPoints=p;const g=a[s];g&&g({points:p,type:r.gradientType,degree:r.gradientDegree,style:E(p,r.gradientType,r.gradientDegree)})},h=(e,t,n="onChange")=>{r.gradientPoints[t].left=e;const o=a[n];o&&o({points:r.gradientPoints,type:r.gradientType,degree:r.gradientDegree,style:E(r.gradientPoints,r.gradientType,r.gradientDegree)})},v=e=>{r.gradientPoints.push(d(u({},r.gradientPoints[r.activePointIndex]),{left:e})),r.activePointIndex=r.gradientPoints.length-1,n.onChange&&n.onChange({points:r.gradientPoints,type:r.gradientType,degree:r.gradientDegree,style:E(r.gradientPoints,r.gradientType,r.gradientDegree)})};return e.onMounted((()=>{const{hue:e,saturation:t,value:n}=c({red:r.colorRed,green:r.colorGreen,blue:r.colorBlue});r.colorHue=e,r.colorSaturation=t,r.colorValue=n,document.addEventListener("keyup",i)})),e.onBeforeUnmount((()=>{document.removeEventListener("keyup",i)})),(t,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(ge,{type:r.gradientType,degree:r.gradientDegree,"change-gradient-control":p},null,8,["type","degree"]),e.createVNode(O,{red:r.colorRed,green:r.colorGreen,blue:r.colorBlue,alpha:r.colorAlpha,hue:r.colorHue,saturation:r.colorSaturation,value:r.colorValue,"update-color":g,"is-gradient":!0,type:r.gradientType,degree:r.gradientDegree,points:r.gradientPoints,"active-point-index":r.activePointIndex,"change-gradient-control":p,"change-active-point-index":s,"update-gradient-left":h,"add-point":v,"remove-point":l},null,8,["red","green","blue","alpha","hue","saturation","value","type","degree","points","active-point-index"]),e.createVNode(re,{red:r.colorRed,green:r.colorGreen,blue:r.colorBlue,alpha:r.colorAlpha,"update-color":g},null,8,["red","green","blue","alpha"])],64))}})),me={class:"ui-color-picker"},fe={class:"btns"},be=e.defineComponent({name:"ColorPicker"});return e.defineComponent(d(u({},be),{props:{isGradient:{type:Boolean,default:!1},color:{default:()=>({red:255,green:0,blue:0,alpha:1,hue:0,saturation:100,value:100})},gradient:{default:()=>({type:"linear",degree:0,points:[{left:0,red:0,green:0,blue:0,alpha:1},{left:100,red:255,green:0,blue:0,alpha:1}]})},cancelText:{default:"取消"},cancelColor:null,cancelBg:null,confirmText:{default:"确认"},confirmColor:null,confirmBg:null},emits:["onChange","onCancel"],setup(t,{emit:n}){const o=t,r=e.ref();r.value=o.isGradient?u({},o.gradient):u({},o.color),e.provide("provideData",{onChange:e=>{r.value=u({},e)},onStartChange:e=>{r.value=u({},e)},onEndChange:e=>{r.value=u({},e)}});const a=()=>{n("onCancel")},l=()=>{n("onChange",u({},r.value))};return(t,n)=>(e.openBlock(),e.createElementBlock("div",me,[o.isGradient?(e.openBlock(),e.createBlock(ve,{key:0,points:o.gradient.points,type:o.gradient.type,degree:o.gradient.degree},null,8,["points","type","degree"])):(e.openBlock(),e.createBlock(le,{key:1,red:o.color.red,green:o.color.green,blue:o.color.blue,alpha:o.color.alpha,hue:o.color.hue,saturation:o.color.saturation,value:o.color.value},null,8,["red","green","blue","alpha","hue","saturation","value"])),e.createElementVNode("div",fe,[e.createElementVNode("div",{class:"btn",style:e.normalizeStyle({color:o.cancelColor,backgroundColor:o.cancelBg}),onClick:a},e.toDisplayString(o.cancelText),5),e.createElementVNode("div",{class:"btn",style:e.normalizeStyle({color:o.confirmColor,backgroundColor:o.confirmBg}),onClick:l},e.toDisplayString(o.confirmText),5)])]))}}))}));
